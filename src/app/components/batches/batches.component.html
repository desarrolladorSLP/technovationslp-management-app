<input type="search" name="filterBatch" class="form-control" placeholder="{{'SEARCH' | translate}}" [(ngModel)]="filterBatch">

<h1 class="text-center">Batches</h1>
<div class="container">
    <div class="row">
        <div class="card col-md-5 mr-3 mt-2">
            <div class="card-body text-center alignVertical">
                <button class="btn" type="button" *ngIf="!addingBatch" (click)='addingBatch = !addingBatch'><i
              class="fa fa-plus plus"></i></button>
                <form class="was-validated" novalidate>
                    <div *ngIf="addingBatch">
                        <div class="input-group  mb-2">
                            <div class="input-group-prepend">
                                <span class="input-group-text">{{'NAME' | translate}}</span>
                            </div>
                            <input [(ngModel)]="batch.name" required class="form-control btn-lg btn-block" type="text" name="name" id="name">
                        
                            <div class="valid-feedback">
                                {{'MESSAGE_VALID' | translate}}
                            </div>
                            <div class="invalid-feedback">
                                {{'FIELD_EMPTY' | translate}}
                            </div>
                        </div>

                        <div class="input-group  mb-2">
                            <div class="input-group-prepend">
                                <span class="input-group-text">{{'START_DATE' | translate}}</span>
                            </div>
                            <input class="form-control" required style="width: 160px" [(ngModel)]="batch.startDate" type="date" name="startDate" id="startDate">
                            <div class="valid-feedback">
                                {{'MESSAGE_VALID' | translate}}
                            </div>
                            <div class="invalid-feedback">
                                {{'FIELD_EMPTY' | translate}}
                            </div>
                        </div>

                        <div class="input-group  mb-2">
                            <div class="input-group-prepend">
                                <span class="input-group-text">{{'END_DATE' | translate}}</span>
                            </div>
                            <input class="form-control" required style="width: 160px" [(ngModel)]="batch.endDate" type="date" name="endDate" id="endDate">
                            <div class="valid-feedback">
                                {{'MESSAGE_VALID' | translate}}
                            </div>
                            <div class="invalid-feedback">
                                {{'FIELD_EMPTY' | translate}}
                            </div>
                        </div>

                        <div class="input-group  mb-2">
                            <div class="input-group-prepend">
                                <span class="input-group-text">{{'NOTES' | translate}}</span>
                            </div>
                            <textarea class="form-control btn-lg btn-block" [(ngModel)]="batch.notes" type="text" name="notes" id="notes"> </textarea>
                            <div class="valid-feedback">
                                {{'MESSAGE_VALID' | translate}}
                            </div>
                            <div class="invalid-feedback">
                                {{'FIELD_EMPTY' | translate}}
                            </div>
                        </div>

                        <div class="input-group  mb-2">
                            <div class="input-group-prepend">
                                <span class="input-group-text">{{'PROGRAMS' | translate}}</span>
                            </div>
                            <select required class="form-control btn-lg btn-block" name="program" [(ngModel)]="batch.programId">
                                <option *ngFor="let program of listPrograms" [value]="program.id">{{program.name}}</option>
                              </select>
                              <div class="valid-feedback">
                                {{'MESSAGE_VALID' | translate}}
                            </div>
                            <div class="invalid-feedback">
                                {{'FIELD_EMPTY' | translate}}
                            </div>
                        </div>

                        <button type="button" (click)='addBatch();' class="btn btn-outline-success btn-lg btn-block">{{'SAVE' | translate}}
            </button>
                        <button type="button" (click)='addingBatch = false' class="btn btn-outline-danger btn-lg btn-block">
              {{'CANCEL' | translate}}
            </button>
                    </div>
                </form>
            </div>
        </div>
        <div *ngFor="let batch of listBatches | filter: filterBatch" class="card col-md-5 mr-3 mt-2">
            <app-batches-card (batchDeleted)="refreshBatches()" [batch]="batch" [listPrograms]="listPrograms"></app-batches-card>
        </div>

    </div>
</div>
